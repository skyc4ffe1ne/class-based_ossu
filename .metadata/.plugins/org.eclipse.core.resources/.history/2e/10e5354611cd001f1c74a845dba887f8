import tester.*;
interface ILoBook{
 int count();
 double salePrice(int discount);
 ILoBook allBefore(int y);
// ILoBook sortByPrice();
}


class Book {
  String title;
  String author;
  int year;
  double price;
  
  Book(String title, String author, int year, double price){
    this.title = title;
    this.author = author;
    this.year = year;
    this.price = price;
  }
  
  
}

class ConsLoBook implements ILoBook{
  Book first;
  ILoBook rest;
  
  
  ConsLoBook(Book first, ILoBook rest){
   this.first = first; 
   this.rest = rest; 
  }
  

  public int count() 
  {
    return 1 + this.rest.count(); 
  }
  
  

  // salePrice(int) -> double
  // Calculate the new price of all the book in the list and return the new list of book with updated price.
  public double salePrice(int discount) 
  {
    return this.helpSalePrice(this.first.price,discount) + this.rest.salePrice(discount); 
  }

  double helpSalePrice(double price,int discount)
  {
   return price - ((price * discount) / 100); 
  }
  
   // produce a list of all books published before the given date
  // from this list of books 
  public ILoBook allBefore(int y) {
    if(this.helperAllBefore()) {
     return new ConsLoBook(this.first, this.rest.allBefore(y)); 
    }else {
      return this.rest.allBefore(y);
    }
  }
  
  boolean helperAllBefore() {
   return this.first.year < y; 
  }



}



class MtLoBook implements ILoBook{
  MtLoBook(){}
  
  public int count() {
    return 0;
  }
  
  public double salePrice(int discount) {
    return 0.0;
  }
   
  public ILoBook allBefore(int y) {
   return this; 
  }
  
}


class ExamplesILoBook{
 ExamplesILoBook(){} 

//Books
Book htdp = new Book("HtDP", "MF", 2001, 60);
Book lpp = new Book("LPP", "STX", 1942, 25);
Book ll = new Book("LL", "FF", 1986, 10);

//lists of Books
ILoBook mtlist = new MtLoBook();
ILoBook lista = new ConsLoBook(this.lpp, this.mtlist);
ILoBook listb = new ConsLoBook(this.htdp, this.mtlist);
ILoBook listc = new ConsLoBook(this.lpp,
               new ConsLoBook(this.ll, this.listb));
ILoBook listd = new ConsLoBook(this.ll,
                 new ConsLoBook(this.lpp,
                   new ConsLoBook(this.htdp, this.mtlist)));

 
 boolean testCont(Tester t)
 {
   return t.checkExpect(this.lista.count(), 1);
 }
 
 boolean testSalePrice(Tester t) {
   return
   // no discount -- full price
   t.checkInexact(this.mtlist.salePrice(0), 0.0, 0.001) &&
   t.checkInexact(this.lista.salePrice(0), 25.0, 0.001) &&
   t.checkInexact(this.listc.salePrice(0), 95.0, 0.001) &&
   t.checkInexact(this.listd.salePrice(0), 95.0, 0.001) &&
   // 50% off sale -- half price
   t.checkInexact(this.mtlist.salePrice(50), 0.0, 0.001) &&
   t.checkInexact(this.lista.salePrice(50), 12.5, 0.001) &&
   t.checkInexact(this.listc.salePrice(50), 47.5, 0.001) &&
   t.checkInexact(this.listd.salePrice(50), 47.5, 0.001);
 }
}


